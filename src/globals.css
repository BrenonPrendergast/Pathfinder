@tailwind base;
@tailwind components;
@tailwind utilities;

/* Design System â€” HSL-only semantic tokens inspired by Looty */
@layer base {
  :root {
    /* Surfaces */
    --background: 224 14% 6%;            /* deep charcoal */
    --foreground: 210 20% 96%;           /* near-white */

    --card: 224 14% 8%;
    --card-foreground: 210 20% 96%;

    --popover: 224 14% 7%;
    --popover-foreground: 210 20% 96%;

    /* Brand - Updated to use Looty's neon-lime */
    --primary: 100 82% 45%;              /* neon-lime */
    --primary-foreground: 0 0% 100%;     /* white */

    --secondary: 217 20% 18%;            /* slate/graphite */
    --secondary-foreground: 210 20% 95%;

    --muted: 217 20% 18%;
    --muted-foreground: 215 18% 65%;

    --accent: 160 60% 38%;               /* teal-green accent */
    --accent-foreground: 210 20% 96%;

    --destructive: 0 72% 45%;
    --destructive-foreground: 0 0% 100%;

    --border: 220 14% 22%;
    --input: 220 14% 22%;
    --ring: 100 82% 45%;

    --radius: 0.75rem;

    /* Extended tokens for gaming/interactive elements */
    --primary-glow: 100 82% 60%;
    --gradient-primary: linear-gradient(135deg, hsl(var(--primary)), hsl(var(--primary-glow)));
    --shadow-glow: 0 14px 38px -12px hsl(var(--primary) / 0.35);
    --shadow-glow-strong: 0 26px 72px -24px hsl(var(--primary) / 0.45);

    --transition-smooth: all 200ms cubic-bezier(0.22, 1, 0.36, 1);
  }

  /* Ensure dark theme consistency */
  .dark {
    --background: 224 14% 6%;
    --foreground: 210 20% 96%;

    --card: 224 14% 8%;
    --card-foreground: 210 20% 96%;

    --popover: 224 14% 7%;
    --popover-foreground: 210 20% 96%;

    --primary: 100 82% 45%;
    --primary-foreground: 0 0% 100%;

    --secondary: 217 20% 18%;
    --secondary-foreground: 210 20% 96%;

    --muted: 217 20% 18%;
    --muted-foreground: 215 18% 65%;

    --accent: 160 60% 38%;
    --accent-foreground: 210 20% 96%;

    --destructive: 0 62% 40%;
    --destructive-foreground: 0 0% 100%;

    --border: 220 14% 22%;
    --input: 220 14% 22%;
    --ring: 100 82% 45%;
  }
}

@layer base {
  * {
    @apply border-border;
  }

  body {
    @apply bg-background text-foreground antialiased;
    font-family: "Nacelle", "Inter", -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif;
  }

  /* Utilities bound to design tokens */
  .gradient-primary {
    background-image: var(--gradient-primary);
  }

  .glow-effect {
    box-shadow: var(--shadow-glow);
  }

  .glow-effect-strong {
    box-shadow: var(--shadow-glow-strong);
  }

  .transition-smooth {
    transition: var(--transition-smooth);
  }
}

/* Skill tree specific styles */
@layer components {
  .skill-node {
    @apply relative aspect-square rounded-md border bg-popover text-popover-foreground flex items-center justify-center cursor-pointer;
    @apply transition-all duration-300 ease-in-out;
  }

  .skill-node:hover {
    @apply scale-105 shadow-lg;
  }

  .skill-node.unlocked {
    @apply opacity-100;
  }

  .skill-node.locked {
    @apply opacity-60;
  }

  .skill-node.glowing {
    @apply glow-effect;
    animation: glow-pulse 2s infinite;
  }

  .skill-connection {
    @apply absolute pointer-events-none;
    stroke-dasharray: 5, 5;
    transition: all 0.3s ease;
  }

  .skill-connection.active {
    stroke-dasharray: none;
    stroke-width: 3px;
  }

  @keyframes glow-pulse {
    0% { box-shadow: 0 0 5px hsl(var(--primary)); }
    50% { box-shadow: 0 0 20px hsl(var(--primary)), 0 0 30px hsl(var(--primary)); }
    100% { box-shadow: 0 0 5px hsl(var(--primary)); }
  }

  @keyframes level-up {
    0% { transform: scale(1); }
    25% { transform: scale(1.2); }
    50% { transform: scale(1.1); }
    75% { transform: scale(1.15); }
    100% { transform: scale(1); }
  }

  @keyframes skill-glow {
    0% { 
      box-shadow: 0 0 10px hsl(var(--primary) / 0.5);
      filter: brightness(1);
    }
    50% { 
      box-shadow: 0 0 30px hsl(var(--primary) / 0.8), 0 0 40px hsl(var(--primary) / 0.6);
      filter: brightness(1.3);
    }
    100% { 
      box-shadow: 0 0 10px hsl(var(--primary) / 0.5);
      filter: brightness(1);
    }
  }

  @keyframes point-pop {
    0% { transform: scale(0.8); opacity: 0; }
    50% { transform: scale(1.3); opacity: 1; }
    100% { transform: scale(1); opacity: 1; }
  }

  .level-up-animation {
    animation: level-up 0.6s ease-out;
  }

  .skill-glow-animation {
    animation: skill-glow 1.5s ease-in-out;
  }

  .point-pop-animation {
    animation: point-pop 0.4s ease-out;
  }

  @keyframes mastery-celebration {
    0% { 
      transform: scale(1) rotate(0deg); 
      filter: brightness(1) saturate(1);
    }
    25% { 
      transform: scale(1.4) rotate(10deg); 
      filter: brightness(1.8) saturate(2);
    }
    50% { 
      transform: scale(1.2) rotate(-5deg); 
      filter: brightness(2) saturate(2.5);
    }
    75% { 
      transform: scale(1.3) rotate(5deg); 
      filter: brightness(1.6) saturate(2);
    }
    100% { 
      transform: scale(1) rotate(0deg); 
      filter: brightness(1.2) saturate(1.5);
    }
  }

  @keyframes particle {
    0% { 
      opacity: 1; 
      transform: scale(1); 
    }
    100% { 
      opacity: 0; 
      transform: scale(0.3); 
    }
  }

  .mastery-celebration {
    animation: mastery-celebration 2s ease-out;
    position: relative;
    overflow: visible;
  }

  .particle {
    position: absolute;
    pointer-events: none;
    border-radius: 50%;
    animation: particle 2s ease-out forwards;
    z-index: 100;
  }
}