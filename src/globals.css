@tailwind base;
@tailwind components;
@tailwind utilities;

/* Design System â€” HSL-only semantic tokens inspired by Looty */
@layer base {
  :root {
    /* Surfaces */
    --background: 224 14% 6%;            /* deep charcoal */
    --foreground: 210 20% 96%;           /* near-white */

    --card: 224 14% 8%;
    --card-foreground: 210 20% 96%;

    --popover: 224 14% 7%;
    --popover-foreground: 210 20% 96%;

    /* Brand - Updated to use Looty's neon-lime */
    --primary: 100 82% 45%;              /* neon-lime */
    --primary-foreground: 0 0% 100%;     /* white */

    --secondary: 217 20% 18%;            /* slate/graphite */
    --secondary-foreground: 210 20% 95%;

    --muted: 217 20% 18%;
    --muted-foreground: 215 18% 65%;

    --accent: 160 60% 38%;               /* teal-green accent */
    --accent-foreground: 210 20% 96%;

    --destructive: 0 72% 45%;
    --destructive-foreground: 0 0% 100%;

    --border: 220 14% 22%;
    --input: 220 14% 22%;
    --ring: 100 82% 45%;

    --radius: 0.75rem;

    /* Extended tokens for gaming/interactive elements */
    --primary-glow: 100 82% 60%;
    --gradient-primary: linear-gradient(135deg, hsl(var(--primary)), hsl(var(--primary-glow)));
    --shadow-glow: 0 14px 38px -12px hsl(var(--primary) / 0.35);
    --shadow-glow-strong: 0 26px 72px -24px hsl(var(--primary) / 0.45);

    --transition-smooth: all 200ms cubic-bezier(0.22, 1, 0.36, 1);
  }

  /* Ensure dark theme consistency */
  .dark {
    --background: 224 14% 6%;
    --foreground: 210 20% 96%;

    --card: 224 14% 8%;
    --card-foreground: 210 20% 96%;

    --popover: 224 14% 7%;
    --popover-foreground: 210 20% 96%;

    --primary: 100 82% 45%;
    --primary-foreground: 0 0% 100%;

    --secondary: 217 20% 18%;
    --secondary-foreground: 210 20% 96%;

    --muted: 217 20% 18%;
    --muted-foreground: 215 18% 65%;

    --accent: 160 60% 38%;
    --accent-foreground: 210 20% 96%;

    --destructive: 0 62% 40%;
    --destructive-foreground: 0 0% 100%;

    --border: 220 14% 22%;
    --input: 220 14% 22%;
    --ring: 100 82% 45%;
  }
}

@layer base {
  * {
    @apply border-border;
  }

  body {
    @apply bg-background text-foreground antialiased;
    font-family: "Nacelle", "Inter", -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif;
  }

  /* Utilities bound to design tokens */
  .gradient-primary {
    background-image: var(--gradient-primary);
  }

  .glow-effect {
    box-shadow: var(--shadow-glow);
  }

  .glow-effect-strong {
    box-shadow: var(--shadow-glow-strong);
  }

  .transition-smooth {
    transition: var(--transition-smooth);
  }
}

/* Skill tree specific styles */
@layer components {
  .skill-node {
    @apply relative aspect-square rounded-md border bg-popover text-popover-foreground flex items-center justify-center cursor-pointer;
    @apply transition-all duration-300 ease-in-out;
  }

  .skill-node:hover {
    @apply scale-105 shadow-lg;
  }

  .skill-node.unlocked {
    @apply opacity-100;
  }

  .skill-node.locked {
    @apply opacity-60;
  }

  .skill-node.glowing {
    @apply glow-effect;
    animation: glow-pulse 2s infinite;
  }

  .skill-connection {
    @apply absolute pointer-events-none;
    stroke-dasharray: 5, 5;
    transition: all 0.3s ease;
  }

  .skill-connection.active {
    stroke-dasharray: none;
    stroke-width: 3px;
  }

  @keyframes glow-pulse {
    0% { box-shadow: 0 0 5px hsl(var(--primary)); }
    50% { box-shadow: 0 0 20px hsl(var(--primary)), 0 0 30px hsl(var(--primary)); }
    100% { box-shadow: 0 0 5px hsl(var(--primary)); }
  }

  @keyframes level-up {
    0% { transform: scale(1); }
    25% { transform: scale(1.2); }
    50% { transform: scale(1.1); }
    75% { transform: scale(1.15); }
    100% { transform: scale(1); }
  }

  @keyframes skill-glow {
    0% { 
      box-shadow: 0 0 10px hsl(var(--primary) / 0.5);
      filter: brightness(1);
    }
    50% { 
      box-shadow: 0 0 30px hsl(var(--primary) / 0.8), 0 0 40px hsl(var(--primary) / 0.6);
      filter: brightness(1.3);
    }
    100% { 
      box-shadow: 0 0 10px hsl(var(--primary) / 0.5);
      filter: brightness(1);
    }
  }

  @keyframes point-pop {
    0% { transform: scale(0.8); opacity: 0; }
    50% { transform: scale(1.3); opacity: 1; }
    100% { transform: scale(1); opacity: 1; }
  }

  .level-up-animation {
    animation: level-up 0.6s ease-out;
  }

  .skill-glow-animation {
    animation: skill-glow 1.5s ease-in-out;
  }

  .point-pop-animation {
    animation: point-pop 0.4s ease-out;
  }

  @keyframes mastery-celebration {
    0% { 
      transform: scale(1) rotate(0deg); 
      filter: brightness(1) saturate(1);
    }
    25% { 
      transform: scale(1.4) rotate(10deg); 
      filter: brightness(1.8) saturate(2);
    }
    50% { 
      transform: scale(1.2) rotate(-5deg); 
      filter: brightness(2) saturate(2.5);
    }
    75% { 
      transform: scale(1.3) rotate(5deg); 
      filter: brightness(1.6) saturate(2);
    }
    100% { 
      transform: scale(1) rotate(0deg); 
      filter: brightness(1.2) saturate(1.5);
    }
  }

  @keyframes particle {
    0% { 
      opacity: 1; 
      transform: scale(1); 
    }
    100% { 
      opacity: 0; 
      transform: scale(0.3); 
    }
  }

  .mastery-celebration {
    animation: mastery-celebration 2s ease-out;
    position: relative;
    overflow: visible;
  }

  .particle {
    position: absolute;
    pointer-events: none;
    border-radius: 50%;
    animation: particle 2s ease-out forwards;
    z-index: 100;
  }

  /* Gaming Background Animations */
  .gaming-grid {
    background-image: 
      linear-gradient(hsla(var(--primary), 0.08) 1px, transparent 1px),
      linear-gradient(90deg, hsla(var(--primary), 0.08) 1px, transparent 1px);
    background-size: 50px 50px;
    animation: grid-move 20s linear infinite;
  }

  .gaming-particle-large {
    animation: float-large 15s ease-in-out infinite;
  }

  .gaming-particle-medium {
    animation: float-medium 12s ease-in-out infinite;
  }

  .gaming-particle-small {
    animation: float-small 8s ease-in-out infinite;
  }

  .gaming-triangle {
    width: 0;
    height: 0;
    border-left: 8px solid transparent;
    border-right: 8px solid transparent;
    border-bottom: 16px solid hsla(var(--accent), 0.15);
    animation: float-rotate 20s ease-in-out infinite;
    filter: blur(0.5px);
  }

  .gaming-hexagon {
    width: 20px;
    height: 20px;
    background: hsla(var(--secondary), 0.15);
    position: relative;
    animation: float-rotate-reverse 25s ease-in-out infinite;
    filter: blur(0.8px);
  }

  .gaming-hexagon:before,
  .gaming-hexagon:after {
    content: "";
    position: absolute;
    width: 0;
    border-left: 10px solid transparent;
    border-right: 10px solid transparent;
  }

  .gaming-hexagon:before {
    bottom: 100%;
    border-bottom: 6px solid hsla(var(--secondary), 0.15);
  }

  .gaming-hexagon:after {
    top: 100%;
    border-top: 6px solid hsla(var(--secondary), 0.15);
  }

  /* Dynamic Gradient Animations */
  .gradient-aurora-1 {
    background: linear-gradient(45deg, 
      hsla(var(--primary), 0.3), 
      hsla(var(--accent), 0.2), 
      hsla(var(--secondary), 0.1));
    animation: aurora-1 30s ease-in-out infinite;
  }

  .gradient-aurora-2 {
    background: linear-gradient(135deg, 
      hsla(var(--accent), 0.2), 
      hsla(var(--primary), 0.15), 
      transparent);
    animation: aurora-2 25s ease-in-out infinite;
  }

  .gradient-aurora-3 {
    background: linear-gradient(225deg, 
      transparent, 
      hsla(var(--secondary), 0.1), 
      hsla(var(--primary), 0.05));
    animation: aurora-3 35s ease-in-out infinite;
  }

  .gradient-plasma-1 {
    background: radial-gradient(circle at 20% 80%, 
      hsla(var(--primary), 0.4) 0%, 
      transparent 50%);
    animation: plasma-1 20s ease-in-out infinite;
  }

  .gradient-plasma-2 {
    background: radial-gradient(circle at 80% 20%, 
      hsla(var(--accent), 0.3) 0%, 
      transparent 50%);
    animation: plasma-2 25s ease-in-out infinite;
  }

  .gradient-plasma-3 {
    background: radial-gradient(circle at 40% 40%, 
      hsla(var(--secondary), 0.2) 0%, 
      transparent 50%);
    animation: plasma-3 30s ease-in-out infinite;
  }

  .gradient-wave-1 {
    background: linear-gradient(0deg, 
      transparent 0%, 
      hsla(var(--primary), 0.1) 50%, 
      transparent 100%);
    animation: wave-1 15s ease-in-out infinite;
  }

  .gradient-wave-2 {
    background: linear-gradient(90deg, 
      transparent 0%, 
      hsla(var(--accent), 0.08) 50%, 
      transparent 100%);
    animation: wave-2 18s ease-in-out infinite;
  }

  .gradient-orb-large {
    background: radial-gradient(circle, 
      hsla(var(--primary), 0.15) 0%, 
      hsla(var(--accent), 0.1) 50%, 
      transparent 70%);
    border-radius: 50%;
    animation: orb-large 40s ease-in-out infinite;
    filter: blur(20px);
  }

  .gradient-orb-medium {
    background: radial-gradient(circle, 
      hsla(var(--accent), 0.2) 0%, 
      hsla(var(--secondary), 0.1) 60%, 
      transparent 80%);
    border-radius: 50%;
    animation: orb-medium 35s ease-in-out infinite;
    filter: blur(15px);
  }

  .gradient-orb-small {
    background: radial-gradient(circle, 
      hsla(var(--secondary), 0.15) 0%, 
      transparent 70%);
    border-radius: 50%;
    animation: orb-small 25s ease-in-out infinite;
    filter: blur(10px);
  }

  /* Logo Animations */
  .logo-pulse {
    animation: logo-pulse 3s ease-in-out infinite;
  }

  .logo-text-glow {
    animation: text-glow 4s ease-in-out infinite;
  }

  .logo-particle {
    animation: logo-particle-burst 2s ease-out infinite;
  }

  .scan-line {
    position: absolute;
    top: 0;
    left: -100%;
    width: 100%;
    height: 2px;
    background: linear-gradient(90deg, 
      transparent, 
      hsl(var(--primary)), 
      transparent);
    animation: scan-line 2s ease-in-out infinite;
  }

  .digital-glitch {
    position: absolute;
    inset: 0;
    background: repeating-linear-gradient(
      0deg,
      transparent,
      transparent 2px,
      hsla(var(--primary), 0.03) 2px,
      hsla(var(--primary), 0.03) 4px
    );
    animation: glitch 1s steps(2, end) infinite;
  }

  /* Level Up Effects */
  .level-up-glow {
    animation: level-up-glow 2s ease-in-out;
    box-shadow: 0 0 20px hsl(var(--primary)), 0 0 40px hsl(var(--primary));
  }

  .level-up-animation {
    animation: level-up-bounce 1.5s ease-out;
  }

  /* Gaming App Bar Styles */
  .gaming-app-bar {
    position: relative;
    overflow: hidden;
  }

  .gaming-app-bar::before {
    content: '';
    position: absolute;
    top: 0;
    left: -100%;
    width: 100%;
    height: 100%;
    background: linear-gradient(
      90deg,
      transparent,
      hsla(var(--primary), 0.1),
      transparent
    );
    animation: app-bar-shine 8s ease-in-out infinite;
  }

  .gaming-page-title {
    position: relative;
  }

  /* Animation Speed Classes */
  .animation-duration-slow {
    animation-duration: 40s;
  }

  .animation-duration-medium {
    animation-duration: 25s;
  }

  .animation-duration-fast {
    animation-duration: 15s;
  }

  /* Noise texture */
  .bg-noise {
    background-image: url("data:image/svg+xml,%3Csvg viewBox='0 0 256 256' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='noiseFilter'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.85' numOctaves='4' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23noiseFilter)'/%3E%3C/svg%3E");
  }

  /* Keyframe Animations */
  @keyframes grid-move {
    0% { transform: translate(0, 0); }
    100% { transform: translate(50px, 50px); }
  }

  @keyframes float-large {
    0%, 100% { transform: translate(0, 0) scale(1); }
    25% { transform: translate(10px, -15px) scale(1.1); }
    50% { transform: translate(-5px, -30px) scale(0.9); }
    75% { transform: translate(-15px, -10px) scale(1.05); }
  }

  @keyframes float-medium {
    0%, 100% { transform: translate(0, 0) rotate(0deg); }
    33% { transform: translate(15px, -10px) rotate(120deg); }
    66% { transform: translate(-10px, -20px) rotate(240deg); }
  }

  @keyframes float-small {
    0%, 100% { transform: translate(0, 0); opacity: 0.3; }
    50% { transform: translate(8px, -12px); opacity: 0.8; }
  }

  @keyframes float-rotate {
    0%, 100% { transform: translate(0, 0) rotate(0deg); }
    25% { transform: translate(20px, -15px) rotate(90deg); }
    50% { transform: translate(-10px, -30px) rotate(180deg); }
    75% { transform: translate(-25px, -5px) rotate(270deg); }
  }

  @keyframes float-rotate-reverse {
    0%, 100% { transform: translate(0, 0) rotate(0deg); }
    25% { transform: translate(-15px, 20px) rotate(-90deg); }
    50% { transform: translate(10px, 30px) rotate(-180deg); }
    75% { transform: translate(25px, 5px) rotate(-270deg); }
  }

  @keyframes aurora-1 {
    0%, 100% { transform: scale(1) rotate(0deg); opacity: 0.3; }
    33% { transform: scale(1.1) rotate(120deg); opacity: 0.5; }
    66% { transform: scale(0.9) rotate(240deg); opacity: 0.4; }
  }

  @keyframes aurora-2 {
    0%, 100% { transform: scale(1) rotate(0deg) translateX(0%); }
    50% { transform: scale(1.2) rotate(180deg) translateX(20%); }
  }

  @keyframes aurora-3 {
    0%, 100% { transform: scale(1) rotate(0deg) translateY(0%); }
    50% { transform: scale(0.8) rotate(-180deg) translateY(-20%); }
  }

  @keyframes plasma-1 {
    0%, 100% { transform: scale(1) translate(0, 0); }
    50% { transform: scale(1.3) translate(20%, -10%); }
  }

  @keyframes plasma-2 {
    0%, 100% { transform: scale(1) translate(0, 0); }
    50% { transform: scale(0.8) translate(-15%, 20%); }
  }

  @keyframes plasma-3 {
    0%, 100% { transform: scale(1) translate(0, 0); }
    50% { transform: scale(1.1) translate(10%, -15%); }
  }

  @keyframes wave-1 {
    0%, 100% { transform: translateX(-100%) skewX(0deg); }
    50% { transform: translateX(100%) skewX(15deg); }
  }

  @keyframes wave-2 {
    0%, 100% { transform: translateY(-100%) skewY(0deg); }
    50% { transform: translateY(100%) skewY(-15deg); }
  }

  @keyframes orb-large {
    0%, 100% { transform: scale(1) translate(0, 0); }
    25% { transform: scale(1.2) translate(10%, -5%); }
    50% { transform: scale(0.8) translate(-5%, 10%); }
    75% { transform: scale(1.1) translate(-10%, -5%); }
  }

  @keyframes orb-medium {
    0%, 100% { transform: scale(1) translate(0, 0); }
    33% { transform: scale(0.9) translate(-8%, 12%); }
    66% { transform: scale(1.15) translate(12%, -8%); }
  }

  @keyframes orb-small {
    0%, 100% { transform: scale(1) translate(0, 0); }
    50% { transform: scale(1.3) translate(5%, -10%); }
  }

  @keyframes logo-pulse {
    0%, 100% { transform: scale(1); filter: brightness(1); }
    50% { transform: scale(1.05); filter: brightness(1.2); }
  }

  @keyframes text-glow {
    0%, 100% { text-shadow: 0 0 10px hsla(var(--primary), 0.5); }
    50% { text-shadow: 0 0 20px hsla(var(--primary), 0.8), 0 0 30px hsla(var(--accent), 0.6); }
  }

  @keyframes logo-particle-burst {
    0% { transform: translate(-50%, -50%) scale(0); opacity: 1; }
    100% { 
      transform: translate(calc(-50% + 30px * cos(var(--angle, 0))), calc(-50% + 30px * sin(var(--angle, 0)))) scale(1); 
      opacity: 0; 
    }
  }

  @keyframes scan-line {
    0% { left: -100%; }
    100% { left: 100%; }
  }

  @keyframes glitch {
    0% { transform: translate(0); }
    20% { transform: translate(-1px, 1px); }
    40% { transform: translate(-1px, -1px); }
    60% { transform: translate(1px, 1px); }
    80% { transform: translate(1px, -1px); }
    100% { transform: translate(0); }
  }

  @keyframes level-up-glow {
    0% { transform: scale(1); filter: brightness(1); }
    50% { transform: scale(1.1); filter: brightness(1.5); }
    100% { transform: scale(1); filter: brightness(1); }
  }

  @keyframes level-up-bounce {
    0%, 20%, 53%, 80%, 100% { transform: translateY(0); }
    40%, 43% { transform: translateY(-15px); }
    70% { transform: translateY(-7px); }
    90% { transform: translateY(-3px); }
  }

  @keyframes app-bar-shine {
    0% { left: -100%; }
    50% { left: 100%; }
    100% { left: 100%; }
  }
}